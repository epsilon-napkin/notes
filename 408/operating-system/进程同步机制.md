
---
title: 进程同步机制
---

### 进程间的相互关系

#### 竞争关系 [Competition]
- 间接制约关系
- 解决方法 --- 进程的 *互斥* [Mutual Exclusion, Mutex], 多个进程互斥地使用系统中共享的独占资源. 

#### 协作关系 [Collaboration]
- 直接制约关系
- 进程协作 --- 某些进程为完成同一任务需要分工协作, 由于合作的每一个进程都是独立地以不可预知的速度推进, 这就需要相互协作的进程在某些协调点上协调各自的工作. 
- 进程的 *同步* [Synchronization] 是解决进程间协作关系的手段. 

### 进程同步机制

在执行次序上进行协调 <hint>[同步]</hint>, 使并发执行的诸进程之间能按照一定的规则或时序共享系统资源 <hint>[互斥]</hint>, 并能很好地相互合作. 

$\textbf{Remark.}$ 临界资源 [Critical Resource] 指任一个时间只允许一个进程使用的资源.

$\textbf{Remark.}$ 临界区 [Critical Section] 指每个进程中访问临界资源的那段代码. 

### 互斥的访问临界资源

#### 访问过程

- 进入区: 尝试进入临界区, 成功则加锁 [lock]. 
- 临界区: 访问共享资源. 
- 退出区: 解锁 [unlock] 唤醒其它阻塞进程. 
- 剩余区: 其它代码. 

#### 访问临界资源的循环进程 

- 进⼊区
- 临界区
- 退出区
- 剩余区

#### 临界区准则

1. 空闲让进. 当无进程处于临界区时, 表明临界资源处于空闲状态, 应允许一个请求进入临界区的进程立即进入自己的临界区, 以有效地利用临界资源.

2. 忙则等待. 当已有进程进入临界区时, 表明临界资源正在被访问, 因而其它试图进入临界区的进程必须等待, 以保证对临界资源的互斥访问.

3. 有限等待. 对要求访问临界资源的进程, 应保证在有限时间内能进入自己的临界区, 以免陷入“死等”状态.

4. 让权等待. 当进程不能进入自己的临界区时, 应立即释放处理机, 以免进程陷入“忙等”状态.

<!--
### 用户级线程

#### 概念

1. 在用户空间实现, 用户级线程是与内核无关. 线程任务控制块设置在用户空间, 操作无须内核帮助.
1. 程序员自己写一个程序库实现逻辑上的线程, 操作系统的视角只看得到进程 (操作系统意识不到用户级线程的存在). 
1. 线程的管理工作由应用程序完成 (通过线程库). 

#### 优点

1. 线程切换不需要操作系统参与, 不需要转换到内核空间, 节省了模式切换开销.
1. 不同进程可以选择不同的调度算法.
1. 用户级线程实现与操作系统平台无关 
-->

