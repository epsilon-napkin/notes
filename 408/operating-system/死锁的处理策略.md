
---
title: 死锁的处理策略
---

打破四个条件之一.

1. 把只能互斥使用的资源改造成允许共享使用, 则系统不会进入死锁状态. 如 SPOOLing 技术. 操作系统可以采用 SPOOLing 技术把独占设备在逻辑上改造成共享设备. 比如用 SPOOLing 技术将打印机改造成共享设备. 
    
    - 该策略的缺点: 并不是所有的资源都可以改造成可共享使用的资源. 并且为了系统安全, 很多地方还必须保护这种互斥性. 因此, 很多时候都无法破坏互斥条件.

1. 破坏不剥夺条件:

    - 方案一: 当某个进程请求新的资源得不到满足时, 它必须立即释放保持的所有资源, 待以后需要时再重新申请. 也就是说, 即使某些资源尚未使用完, 也需要主动释放, 从而破坏了不可剥夺条件.
    
    - 方案二: 当某个进程需要的资源被其他进程所占有的时候, 可以由操作系统协助, 将想要的资源强行剥夺. 这种方式一般需要考虑各进程的优先级 (比如: 剥夺调度方式, 就是将处理机资源强行剥夺给优先级更高的进程使用). 
    
    - 该策略的缺点: 实现起来比较复杂. 释放已获得的资源可能造成前一阶段工作的失效. 因此这种方法一般只适用于易保存和恢复状态的资源, 如 CPU.反复地申请和释放资源会增加系统开销, 降低系统吞吐量.若采用方案一, 意味着只要暂时得不到某个资源, 之前获得的那些资源都需要放弃, 以后再重新申请. 如果一直发生这样的情况, 就会导致进程饥饿. 

1. 破坏循环等待条件
    - 可采用顺序资源分配法. 首先给系统中的资源编号, 规定每个进程必须按编号递增的顺序请求资源, 同类资源 (即编号相同的资源) 一次申请完. 

    - 该策略的缺点: 不方便增加新的设备, 因为可能需要重新分配所有的编号. 进程实际使用资源的顺序可能和编号递增顺序不一致, 会导致资源浪费. 必须按规定次序申请资源, 用户编程麻烦. 
